// Auto-generated by CrossPacket - do not modify manually
using System;
using System.Collections.Generic;
using System.Text.Json;
using System.Text.Json.Serialization;
using MessagePack;

namespace CrossPacket
{
    /// <summary>
    /// Chunked data packet for progressive loading of large datasets
    /// </summary>
    [MessagePackObject]
    public class DataChunkPacket
    {
        public const string TYPE = "/example/DataChunkPacket";

        [Key("packetType")]
        [JsonPropertyName("packetType")]
        public string Type { get; set; } = TYPE;

        /// <summary>Current chunk index (0-based)</summary>
        [Key("chunk_index")]
        [JsonPropertyName("chunk_index")]
        public long ChunkIndex { get; set; }

        /// <summary>Total number of chunks</summary>
        [Key("total_chunks")]
        [JsonPropertyName("total_chunks")]
        public long TotalChunks { get; set; }

        /// <summary>Chunk data - native msgpack map</summary>
        [Key("data")]
        [JsonPropertyName("data")]
        public Dictionary<string, object> Data { get; set; } = new Dictionary<string, object>();

        /// <summary>Checksum for data integrity verification</summary>
        [Key("checksum")]
        [JsonPropertyName("checksum")]
        public string Checksum { get; set; } = "";

        public DataChunkPacket() { }

        public DataChunkPacket(long chunkIndex, long totalChunks, Dictionary<string, object> data, string checksum)
        {
            this.ChunkIndex = chunkIndex;
            this.TotalChunks = totalChunks;
            this.Data = data;
            this.Checksum = checksum;
        }

        public string ToJson()
        {
            return JsonSerializer.Serialize(this);
        }

        public static DataChunkPacket? FromJson(string json)
        {
            return JsonSerializer.Deserialize<DataChunkPacket>(json);
        }

        public byte[] ToMsgPack()
        {
            return MessagePackSerializer.Serialize(this);
        }

        public static DataChunkPacket FromMsgPack(byte[] data)
        {
            return MessagePackSerializer.Deserialize<DataChunkPacket>(data);
        }
    }
}
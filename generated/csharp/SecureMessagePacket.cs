// Auto-generated by CrossPacket - do not modify manually
using System;
using System.Collections.Generic;
using System.Text.Json;
using System.Text.Json.Serialization;
using MessagePack;

namespace CrossPacket
{
    /// <summary>
    /// Security-hardened message packet with strict validation
    /// </summary>
    [MessagePackObject]
    public class SecureMessagePacket
    {
        public const string TYPE = "/example/SecureMessagePacket";

        [Key("packetType")]
        [JsonPropertyName("packetType")]
        public string Type { get; set; } = TYPE;

        /// <summary>UUID message identifier</summary>
        [Key("message_id")]
        [JsonPropertyName("message_id")]
        public string MessageId { get; set; } = "";

        /// <summary>Sender user ID</summary>
        [Key("sender_id")]
        [JsonPropertyName("sender_id")]
        public long SenderId { get; set; }

        /// <summary>Recipient user ID</summary>
        [Key("recipient_id")]
        [JsonPropertyName("recipient_id")]
        public long RecipientId { get; set; }

        /// <summary>Message subject (max 200 chars)</summary>
        [Key("subject")]
        [JsonPropertyName("subject")]
        public string Subject { get; set; } = "";

        /// <summary>Message body (max 10000 chars)</summary>
        [Key("body")]
        [JsonPropertyName("body")]
        public string Body { get; set; } = "";

        /// <summary>Attachment metadata (max 5 files)</summary>
        [Key("attachments")]
        [JsonPropertyName("attachments")]
        public List<object> Attachments { get; set; } = new List<object>();

        /// <summary>Encrypted message content (max 10MB)</summary>
        [Key("encrypted_payload")]
        [JsonPropertyName("encrypted_payload")]
        public byte[]? EncryptedPayload { get; set; }

        /// <summary>Message priority (1-5)</summary>
        [Key("priority")]
        [JsonPropertyName("priority")]
        public long Priority { get; set; }

        /// <summary>Read status flag</summary>
        [Key("is_read")]
        [JsonPropertyName("is_read")]
        public bool IsRead { get; set; }

        /// <summary>Send timestamp</summary>
        [Key("sent_at")]
        [JsonPropertyName("sent_at")]
        public DateTimeOffset SentAt { get; set; }

        public SecureMessagePacket() { }

        public SecureMessagePacket(string messageId, long senderId, long recipientId, string subject, string body, List<object> attachments, byte[]? encryptedPayload, long priority, bool isRead, DateTimeOffset sentAt)
        {
            this.MessageId = messageId;
            this.SenderId = senderId;
            this.RecipientId = recipientId;
            this.Subject = subject;
            this.Body = body;
            this.Attachments = attachments;
            this.EncryptedPayload = encryptedPayload;
            this.Priority = priority;
            this.IsRead = isRead;
            this.SentAt = sentAt;
        }

        public string ToJson()
        {
            return JsonSerializer.Serialize(this);
        }

        public static SecureMessagePacket? FromJson(string json)
        {
            return JsonSerializer.Deserialize<SecureMessagePacket>(json);
        }

        public byte[] ToMsgPack()
        {
            return MessagePackSerializer.Serialize(this);
        }

        public static SecureMessagePacket FromMsgPack(byte[] data)
        {
            return MessagePackSerializer.Deserialize<SecureMessagePacket>(data);
        }
    }
}
// This file is auto-generated. Do not modify manually.
// Generated by CrossPacket
import 'dart:convert';
import 'dart:typed_data';
import 'package:msgpack_dart/msgpack_dart.dart' as msgpack;
import './generated/message_packet.dart';
import './generated/ping_packet.dart';
import './generated/pong_packet.dart';
import './generated/data_chunk_packet.dart';
import './generated/comprehensive_packet.dart';
import './generated/user_profile_packet.dart';
import './generated/secure_message_packet.dart';

/// A pure Dart TimeOfDay class (no Flutter dependency).
/// Represents a time of day with hour and minute components.
class TimeOfDay {
  /// The hour of the day, from 0 to 23.
  final int hour;
  /// The minute of the hour, from 0 to 59.
  final int minute;

  /// Creates a TimeOfDay with the given hour and minute.
  const TimeOfDay({required this.hour, required this.minute});

  /// Formats the time as HH:mm.
  String format() {
    final h = hour.toString().padLeft(2, '0');
    final m = minute.toString().padLeft(2, '0');
    return '$h:$m';
  }

  @override
  String toString() => 'TimeOfDay(hour: $hour, minute: $minute)';

  @override
  bool operator ==(Object other) {
    return other is TimeOfDay && other.hour == hour && other.minute == minute;
  }

  @override
  int get hashCode => hour.hashCode ^ minute.hashCode;
}

/// Base class for all data packets.
abstract class DataPacket {
  /// The packet type identifier.
  String get type;

  /// Serializes the packet to a Map.
  Map<String, dynamic> serialize();

  /// Converts the packet to a JSON string.
  String toJson() => jsonEncode(serialize());

  /// Creates a DataPacket from a JSON string.
  static DataPacket fromJson(String jsonString) {
    return deserialize(jsonDecode(jsonString) as Map<String, dynamic>);
  }

  /// Serializes the packet to MessagePack binary format.
  Uint8List toMsgPack() => msgpack.serialize(serialize());

  /// Creates a DataPacket from MessagePack binary data.
  static DataPacket fromMsgPack(Uint8List bytes) {
    final data = msgpack.deserialize(bytes);
    return deserialize(Map<String, dynamic>.from(data as Map));
  }

  /// Creates a DataPacket from a deserialized Map.
  static DataPacket deserialize(Map<String, dynamic> data) {
    switch (data['packetType']) {
      case '/chat/MessagePacket':
        return MessagePacket.fromJson(jsonEncode(data));
      case '/example/PingPacket':
        return PingPacket.fromJson(jsonEncode(data));
      case '/example/PongPacket':
        return PongPacket.fromJson(jsonEncode(data));
      case '/example/DataChunkPacket':
        return DataChunkPacket.fromJson(jsonEncode(data));
      case '/test/ComprehensivePacket':
        return ComprehensivePacket.fromJson(jsonEncode(data));
      case '/example/UserProfilePacket':
        return UserProfilePacket.fromJson(jsonEncode(data));
      case '/example/SecureMessagePacket':
        return SecureMessagePacket.fromJson(jsonEncode(data));
      default:
        throw UnimplementedError('Unknown packet type: ${data['packetType']}');
    }
  }
}